(function(){'use strict';function a(b,c,...d){const e=[];for(const a of d)Array.isArray(a)?e.push(...a):e.push(a);const f=z(e);if('function'!=typeof b)return{nodeType:b,props:c,children:f,lifeCycle:0};const g=Object.assign({children:f},c),h=b(g);return'function'==typeof h?a(h,c,...f):h}function*b(a){if(yield a,a.children&&0<a.children.length)for(const c of a.children)yield*b(c)}function c(a){function b(a={},c=[]){const d=c.shift(),e=a[d];return e===void 0||0===c.length?e:b(e,c)}const c=a.split('.');return{get(a){return b(a,[...c])},set:function(a,b){let d=a;const[e,...f]=c.reverse();for(const c of f.reverse())void 0===d[c]&&(d[c]={},d=d[c]);return d[e]=Object.assign(d[e]||{},b),a}}}function d(a){const d=c(a).get;return(c,a)=>{const b=d(c),e=d(a);return b===e?0:void 0===e?-1:void 0===b?1:b<e?-1:1}}function e({pointer:a,direction:b}={}){if(!a||'none'===b)return(a)=>[...a];const c=d(a),e='desc'===b?A(c):c;return(a)=>[...a].sort(e)}function f(a){return'boolean'===a?Boolean:'number'===a?Number:'date'===a?(a)=>new Date(a):B(String,(a)=>a.toLowerCase())}function g({value:a='',operator:b='includes',type:c='string'}){const d=f(c),e=B(d,oa[b]),g=e(a);return B(d,g)}function h(a){const b={},c=Object.keys(a).filter((b)=>Array.isArray(a[b]));return c.forEach((c)=>{const d=a[c].filter((a)=>''!==a.value);0<d.length&&(b[c]=d)}),b}function i(a){const b=h(a),d=Object.keys(b).map((a)=>{const d=c(a).get,e=b[a].map(g);return B(d,pa(e))}),e=pa(d);return(a)=>a.filter(e)}function j(a={}){const{value:b,scope:d=[]}=a,e=d.map((a)=>c(a).get);return 0!==d.length&&b?(a)=>a.filter((a)=>e.some((c)=>(c(a)+'').includes(b+''))):(a)=>a}function k(){const a={},b={on(c,...d){return a[c]=(a[c]||[]).concat(d),b},dispatch(c,...d){const e=a[c]||[];for(const a of e)a(...d);return b},off(c,...d){if(c===void 0)Object.keys(a).forEach((a)=>b.off(a));else{const b=a[c]||[];a[c]=d.length?b.filter((a)=>!d.includes(a)):[]}return b}};return b}function l(a){const{get:b,set:d}=c(a);return{get:b,set:C(d)}}function m({sortFactory:a,tableState:b,data:c,filterFactory:d,searchFactory:e}){const f=k(),g=l('sort'),h=l('slice'),i=l('filter'),j=l('search'),m=C((a,b)=>Object.assign({},a,b)),n=C(f.dispatch,2),o=(a)=>n(wa,{page:b.slice.page,size:b.slice.size,filteredCount:a.length}),p=C((a,c,d)=>B(m(a.get(b)),D(n(c)),a.set(b))(d)),q=()=>p(h,ta,{page:1}),r=(a,b)=>B(p(a,b),q,()=>f.exec()),s={sort:r(g,ra),filter:r(i,va),search:r(j,xa),slice:B(p(h,ta),()=>f.exec()),exec:({processingDelay:k=20}={})=>{f.dispatch(ua,{working:!0}),setTimeout(()=>{try{const k=d(i.get(b)),l=e(j.get(b)),m=a(g.get(b)),n=qa(h.get(b)),p=B(k,l,D(o),m,n),q=p(c);f.dispatch(sa,q.map((a)=>{return{index:c.indexOf(a),value:a}}))}catch(a){f.dispatch(ya,a)}finally{f.dispatch(ua,{working:!1})}},k)},eval(f=b){return Promise.resolve().then(()=>{const b=a(g.get(f)),k=e(j.get(f)),l=d(i.get(f)),m=qa(h.get(f)),n=B(l,k,b,m);return n(c).map((a)=>({index:c.indexOf(a),value:a}))})},onDisplayChange(a){f.on(sa,a)},getTableState(){const a=Object.assign({},b.sort),c=Object.assign({},b.search),d=Object.assign({},b.slice),e={};for(const a of Object.getOwnPropertyNames(b.filter))e[a]=b.filter[a].map((a)=>Object.assign({},a));return{sort:a,search:c,slice:d,filter:e}}},t=Object.assign(f,s);return Object.defineProperty(t,'length',{get(){return c.length}}),t}function n(a,b=300){let c;return(d)=>{c&&window.clearTimeout(c),c=window.setTimeout(function(){a(d)},b)}}function o(a,{rowSelector:b,cellSelector:c}){const d=Bb(a,b),e=[...d.querySelectorAll(c)],f=e.indexOf(a),g=Eb(a);return{selectFromAfter:g,selectFromBefore:g,next(){return void 0===e[f+1]?null:e[f+1]},previous(){return void 0===e[f-1]?null:e[f-1]}}}function p(a,b){const c=o(a,b);return{previous:c.previous,next:c.next}}function q(a,b){const c=Bb(a,b.cellSelector),d=c.getAttribute(Cb),e=[...c.querySelectorAll(d)],f=e.length,g=a!==c;return{selectFromBefore(){return g?a:e[0]},selectFromAfter(){return g?a:e[f-1]},next(){const d=e.indexOf(a);return g&&d+1<f?e[d+1]:o(c,b).next()},previous(){const d=e.indexOf(a);return g&&0<d?e[d-1]:o(c,b).previous()}}}function r(a,b){return null===a?null:a.hasAttribute(Db)?p(a,b):a.hasAttribute(Cb)||!a.matches(b.cellSelector)?q(a,b):o(a,b)}function s(a,b,{rowSelector:c='tr',cellSelector:d='th,td'}={}){const e=[...b.querySelectorAll(c)],f=[...a.querySelectorAll(d)],g=e.indexOf(a);return{previous(){return void 0===e[g-1]?null:e[g-1]},next(){return void 0===e[g+1]?null:e[g+1]},item(a){return void 0===f[a]?null:f[a]}}}function t(a,b,c){const d=s(a,b,c);return{previous:d.previous,next:d.next}}function u(a,b,{rowSelector:c,cellSelector:d}={}){if(null===a)return null;const e=Bb(a,c);return e.hasAttribute(Db)?t(e,b,{rowSelector:c,cellSelector:d}):s(a,b,{rowSelector:c,cellSelector:d})}function v(a,b){const{rowSelector:c,cellSelector:d}=b;return{moveRight(a){const c=r(a,b);let d=r(c.next(),b);for(;null!==d&&void 0===d.selectFromBefore;)d=r(d.next(),b);return null===d?a:d.selectFromBefore()},moveLeft(a){const c=r(a,b);let d=r(c.previous(),b);for(;null!==d&&void 0===d.selectFromAfter;)d=r(d.previous(),b);return null===d?a:d.selectFromAfter()},moveUp(e){const f=Bb(e,c),g=[...f.querySelectorAll(d)],h=u(f,a,b);let i=u(h.previous(),a,b);for(;null!==i&&void 0===i.item;)i=u(i.previous(),a,b);if(null===i)return e;let j=g.indexOf(Bb(e,d)),k=r(i.item(j),b);for(;null===k||void 0===k.selectFromBefore&&0<j;)j--,k=r(i.item(j),b);return k.selectFromBefore()},moveDown(e){const f=Bb(e,c),g=[...f.querySelectorAll(d)],h=u(f,a,b);let i=u(h.next(),a,b);for(;null!==i&&void 0===i.item;)i=u(i.next(),a,b);if(null===i)return e;let j=g.indexOf(Bb(e,d)),k=r(i.item(j),b);for(;null===k||void 0===k.selectFromBefore&&0<j;)j--,k=r(i.item(j),b);return k.selectFromBefore()}}}function w(a,{rowSelector:b='tr',cellSelector:c='td,th'}={}){let d=null;const e=v(a,{rowSelector:b,cellSelector:c});a.addEventListener('keydown',({target:a,keyCode:b})=>{let c=null;37===b?c=e.moveLeft(a):38===b?c=e.moveUp(a):39===b?c=e.moveRight(a):40===b&&(c=e.moveDown(a)),null!==c&&(c.focus(),null!=d&&d.setAttribute('tabindex','-1'),c.setAttribute('tabindex','0'),d=c)})}var x=Math.min;const y=(a)=>({nodeType:'Text',children:[],props:{value:a},lifeCycle:0}),z=(a,b='',c=[])=>{if(0===a.length)return b&&c.push(y(b)),c;const d=a.shift(),e=typeof d;return'object'==e||'function'==e?(b&&(c.push(y(b)),b=''),c.push(d)):b+=d,z(a,b,c)},A=(c)=>(d,a)=>c(a,d),B=(a,...b)=>(...c)=>b.reduce((a,b)=>b(a),a(...c)),C=(a,b)=>{const c=b||a.length;return(...b)=>{const d=b.length||1;if(c===d)return a(...b);return C((...c)=>a(...b,...c),c-b.length)}},D=(a)=>(b)=>{return a(b),b},E=(a)=>setTimeout(a,0),F=(a)=>(b)=>[b,a[b]],G=(c,a)=>{const b=Object.keys(c),d=Object.keys(a);return b.length===d.length&&b.every((b)=>c[b]===a[b])},H=(a)=>Object.getOwnPropertyNames(a),I=(c,d)=>{const e=typeof c;if(c===d)return!0;if(e!=typeof d)return!1;if('object'!=e)return c===d;if(null===c||null===d)return!1;if(Array.isArray(c))return c.length&&d.length&&c.every((a,b)=>I(c[b],d[b]));const f=H(c),g=H(d);return f.length===g.length&&f.every((a)=>I(c[a],d[a]))},J=(b)=>b,K=()=>{},L='http://www.w3.org/2000/svg',M=(a)=>(b)=>D((c)=>{for(const d of b)c[a](...d)}),N=M('removeEventListener'),O=M('addEventListener'),P=(a)=>D((b)=>{const c=a.filter((a)=>'function'!=typeof a.value);for(const[a,d]of c)!1===d?b.removeAttribute(a):b.setAttribute(a,d)}),Q=(a)=>D((b)=>{for(const c of a)b.removeAttribute(c)}),R=(a)=>(b)=>{b.textContent=a},S=(a)=>Object.keys(a).filter((a)=>'on'===a.substr(0,2)).map((b)=>[b.substr(2).toLowerCase(),a[b]]),T=({props:a}={},{props:b}={})=>{const c=S(a||{}),d=S(b||{});return c.length||d.length?B(N(d),O(c)):K},U=(a,b)=>{const c=a.props||{},d=b.props||{};if(G(c,d))return K;if('Text'===a.nodeType)return R(a.props.value);const e=Object.keys(c),f=Object.keys(d),g=f.filter((a)=>!e.includes(a));return B(Q(g),P(e.map(F(c))))},V=(a,b)=>{if('svg'===a.nodeType)return document.createElementNS(L,a.nodeType);return'Text'===a.nodeType?document.createTextNode(a.nodeType):b.namespaceURI===L?document.createElementNS(L,a.nodeType):document.createElement(a.nodeType)},W=(a,b,c)=>{return!a&&b?(b.dom=c.appendChild(V(b,c)),b.lifeCycle=1,{vnode:b,garbage:null}):b?b.nodeType===a.nodeType?(b.dom=a.dom,a.onUnMount&&(b.onUnMount=a.onUnMount),b.lifeCycle=a.lifeCycle+1,{garbage:null,vnode:b}):(b.dom=V(b,c),b.lifeCycle=1,c.replaceChild(b.dom,a.dom),{garbage:a,vnode:b}):(c.removeChild(a.dom),{garbage:a,dom:null})},X=(a,c,d,e=[])=>{const{vnode:f,garbage:h}=W(a,c,d);if(null!==h)for(const a of b(h))a.onUnMount&&e.push(a.onUnMount);const g=null===h&&a?a:{length:0,children:[],props:{}};if(f){if(f.onUpdate&&1<f.lifeCycle&&f.onUpdate(),U(f,g)(f.dom),'Text'===f.nodeType)return e;f.onMount&&1===f.lifeCycle&&e.push(()=>f.onMount());const a=Math.max(g.children.length,f.children.length),b=T(f,g);if(b!==K&&e.push(()=>b(f.dom)),0<a)for(let b=0;b<a;b++)X(g.children[b],f.children[b],f.dom,e)}return e},Y=(a,b)=>{const c=Object.assign({},a),d=Array.from(b.childNodes).filter((a)=>3!==a.nodeType||''!==a.nodeValue.trim());return c.dom=b,c.children=a.children.map((a,b)=>Y(a,d[b])),c},Z=C((a,b,c)=>{const d=void 0===a.nodeType?a(b||{}):a,e=c.children.length?Y(d,c.children[0]):null,f=X(e,d,c);return E(()=>{for(const a of f)a()}),d});var $=(a,b)=>{let c=b;return(b,...d)=>{const e=c.dom.parentNode,f=a(Object.assign({children:c.children||[]},c.props,b),...d),g=X(c,f,e);return c=Object.assign(c||{},f),E(()=>{for(const a of g)a()}),f}};const _=(a)=>C((b,c)=>(d,...e)=>{const f=c(d,...e),g=()=>b(f,...e),h=f[a];return f[a]=h?B(h,g):g,f}),aa=_('onMount'),ba=_('onUnMount'),ca=_('onUpdate');var da=(a)=>()=>{let b;const c=(c,...d)=>{return a(c,(a)=>b(a),...d)},d=(a)=>{b=$(c,a)};return B(aa(d),ca(d))(c)};const ea=(c,a)=>!1===I(c,a);var fa=(a,b=J)=>(c,d=J,e=ea)=>(f)=>{const g=f;let h,i,j;const k=(e,...f)=>{return c(Object.assign(e,d(b(a.getState()))),...f)},l=aa((c)=>{h=$(k,c),j=a.subscribe(()=>{const c=b(a.getState());!0===e(i,c)&&(Object.assign(g,d(c)),h(g),i=c)})}),m=ba(()=>{j()});return B(l,m)(k)};const ga=(a)=>Object.entries(a||{}).filter(([a,b])=>'function'!=typeof b),ha=(a)=>(a+'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'),ia=C((a,b)=>{const c=void 0===a.nodeType?a(b||{}):a,{nodeType:d,children:e,props:f}=c,g=ha(ga(f).map(([a,b])=>'boolean'==typeof b?!0===b?a:'':`${a}="${b}"`).join(' ')),h=void 0!==e&&0<e.length?e.map((a)=>ia(a)()).join(''):'';return'Text'===d?ha(f.value+''):`<${d}${g?` ${g}`:''}>${h}</${d}>`}),ja=(a)=>(b)=>!a(b),ka=(a)=>(b)=>Object.is(a,b),la=(a)=>(b)=>b<a,ma=(a)=>(b)=>b>a,na=(a)=>(b)=>a===b,oa={includes:(a)=>(b)=>b.includes(a),is:ka,isNot:B(ka,ja),lt:la,gte:B(la,ja),gt:ma,lte:B(ma,ja),equals:na,notEquals:B(na,ja)},pa=(a)=>(...b)=>a.every((a)=>a(...b));var qa=({page:b=1,size:a}={})=>(c=[])=>{const d=a||c.length,e=(b-1)*d;return c.slice(e,e+d)};const ra='TOGGLE_SORT',sa='DISPLAY_CHANGED',ta='CHANGE_PAGE',ua='EXEC_CHANGED',va='FILTER_CHANGED',wa='SUMMARY_CHANGED',xa='SEARCH_CHANGED',ya='EXEC_ERROR',za=C((a,b)=>a[b]),Aa=C((a,b,c)=>a.map((a,d)=>c===d?b:a)),Ba=C((a,b,c)=>Aa(a,Object.assign(a[c],b),c)),Ca=C((a,b)=>a.filter((a,c)=>b!==c)),Da=C((a,b,c)=>[...a.slice(0,c),b,...a.slice(c)]),Ea=function(a){return function(b={tableState:a.getTableState(),displayed:[],summary:{},isProcessing:!1},c){const{type:d,args:e}=c;switch(d){case'TOGGLE_FILTER':{const{filter:a}=c;return Object.assign({},b,{activeFilter:a})}default:return a[d]&&a[d](...e),b;}}},Fa=function({sortFactory:a=e,filterFactory:b=i,searchFactory:c=j,tableState:d={sort:{},slice:{page:1},filter:{},search:{}},data:f=[]},...g){const h=m({sortFactory:a,filterFactory:b,tableState:d,data:f,searchFactory:c});return g.reduce((e,g)=>Object.assign(e,g({sortFactory:a,filterFactory:b,searchFactory:c,tableState:d,data:f,table:h})),h)}({data,tableState:{search:{},filter:{},sort:{},slice:{page:1,size:20}}},function({data:a,table:b}){const c=B((b)=>{a.splice(0),a.push(...b)},b.exec);return{update(b,d){return B(Aa(a,d),c)(b)},patch(b,c){return Ba(a,c,b)},remove:B(Ca(a),c),insert(b,d=0){return B(Da(a,b),c)(d)},get:za(a)}});var Ga=function(a){const b=Ea(a);let c,d={tableState:a.getTableState()},e=[];const f=()=>{for(let a of e)a()};return a.on('SUMMARY_CHANGED',function(a){c=a}),a.on('EXEC_CHANGED',function({working:a}){Object.assign(d,{isProcessing:a}),f()}),a.onDisplayChange(function(b){Object.assign(d,{tableState:a.getTableState(),displayed:b,summary:c}),f()}),{subscribe(a){return e.push(a),()=>{e=e.filter((b)=>b!==a)}},getState(){return Object.assign({},d,{tableState:a.getTableState()})},dispatch(c={}){d=b(d,c),c.type&&!a[c.type]&&f()}}}(Fa);const Ha=(...a)=>(b)=>{const{keyCode:c}=b;-1===a.indexOf(c)&&b.stopPropagation()},Ia=aa((a)=>a.dom.focus()),Ja=Ia((b)=>{return delete b.children,a('input',b)}),Ka=(a)=>(b)=>{const{keyCode:c}=b;13===c?a.toggleEdit(!0)():27===c&&b.currentTarget.focus()},La=(b)=>{const c=Ka(b);return a('td',{tabIndex:'-1',onKeyDown:c,onClick:b.toggleEdit(!0),class:b.className},'true'===b.isEditing?a(Ja,{onKeydown:Ha(27),type:b.type||'text',value:b.currentValue,onInput:b.onInput,onBlur:b.toggleEdit(!1)}):a('span',null,b.currentValue))},Ma=(a)=>{return da((b,c)=>{const d=Object.assign({},{toggleEdit:(a)=>()=>c(Object.assign({},b,{isEditing:void 0===a?!0!==b.isEditing:a}))},b);return a(d)})},Na=Ma((b)=>{const{toggleEdit:c,person:d,index:e,className:f,patch:g,isEditing:h}=b;let i=d.name.last;const j=n((a)=>{i=a.target.value,g(e,{name:{last:i,first:d.name.first}})});return a(La,{isEditing:(!0===h)+'',toggleEdit:c,className:f,currentValue:i,onInput:j})}),Oa=Ma((b)=>{const{toggleEdit:c,person:d,index:e,className:f,patch:g,isEditing:h}=b;let i=d.name.first;const j=n((a)=>{i=a.target.value,g(e,{name:{first:i,last:d.name.last}})});return a(La,{isEditing:(!0===h)+'',toggleEdit:c,className:f,currentValue:i,onInput:j})}),Pa=Ia(({onChange:b,toggleEdit:c,person:d})=>{return a('select',{onKeyDown:Ha(27),name:'gender select',onChange:b,onBlur:c(!1)},a('option',{value:'male',selected:'male'===d.gender},'male'),a('option',{value:'female',selected:'female'===d.gender},'female'))}),Qa=Ma((b)=>{const{toggleEdit:c,person:d,index:e,className:f,patch:g,isEditing:h}=b;let i=d.gender;const j=Ka(b),k=n((a)=>{i=a.target.value,g(e,{gender:i})}),l='female'===d.gender?'gender-female':'gender-male';return a('td',{tabIndex:'-1',onKeyDown:j,onClick:c(!0),class:f},h?a(Pa,{onChange:k,toggleEdit:c,person:d}):a('span',{class:l},i))}),Ra=Ma((b)=>{const{toggleEdit:c,person:d,index:e,className:f,patch:g,isEditing:h}=b;let i=d.size;const j=n((a)=>{i=a.target.value,g(e,{size:i})}),k=100*x((d.size-150)/50,1),l=Ka(b);return a('td',{tabIndex:'-1',class:f,onKeyDown:l,onClick:c(!0)},h?a(Ja,{onKeydown:Ha(27),type:'number',min:'150',max:'200',value:i,onBlur:c(!1),onInput:j}):a('span',null,a('span',{style:`height: ${k}%`,class:'size-stick'}),i))}),Sa=Ma((b)=>{const{toggleEdit:c,person:d,index:e,className:f,patch:g,isEditing:h}=b;let i=d.birthDate;const j=n((a)=>{i=a.target.value,g(e,{birthDate:new Date(i)})});return a(La,{type:'date',isEditing:(!0===h)+'',toggleEdit:c,className:f,currentValue:i.toDateString(),onInput:j})}),Ta=()=>a('svg',{"aria-hidden":'true',class:'icon',viewBox:'0 0 32 32'},a('path',{d:'M16 0c-8.837 0-16 2.239-16 5v3l12 12v10c0 1.105 1.791 2 4 2s4-0.895 4-2v-10l12-12v-3c0-2.761-7.163-5-16-5zM2.95 4.338c0.748-0.427 1.799-0.832 3.040-1.171 2.748-0.752 6.303-1.167 10.011-1.167s7.262 0.414 10.011 1.167c1.241 0.34 2.292 0.745 3.040 1.171 0.494 0.281 0.76 0.519 0.884 0.662-0.124 0.142-0.391 0.38-0.884 0.662-0.748 0.427-1.8 0.832-3.040 1.171-2.748 0.752-6.303 1.167-10.011 1.167s-7.262-0.414-10.011-1.167c-1.24-0.34-2.292-0.745-3.040-1.171-0.494-0.282-0.76-0.519-0.884-0.662 0.124-0.142 0.391-0.38 0.884-0.662z'})),Ua=()=>a('svg',{"aria-hidden":'true',class:'icon',viewBox:'0 0 32 32'},a('path',{d:'M6 32h20l2-22h-24zM20 4v-4h-8v4h-10v6l2-2h24l2 2v-6h-10zM18 4h-4v-2h4v2z'})),Va=()=>a('svg',{class:'icon',viewBox:'0 0 32 32'},a('path',{d:'M2 6h28v6h-28zM2 14h28v6h-28zM2 22h28v6h-28z'})),Wa=()=>a('svg',{class:'icon',viewBox:'0 0 32 32'},a('path',{d:'M10 24v-24h-4v24h-5l7 7 7-7h-5z'}),a('path',{d:'M14 18h18v4h-18v-4z'}),a('path',{d:'M14 12h14v4h-14v-4z'}),a('path',{d:'M14 6h10v4h-10v-4z'}),a('path',{d:'M14 0h6v4h-6v-4z'})),Xa=()=>a('svg',{class:'icon',viewBox:'0 0 32 32'},a('path',{d:'M10 24v-24h-4v24h-5l7 7 7-7h-5z'}),a('path',{d:'M14 0h18v4h-18v-4z'}),a('path',{d:'M14 6h14v4h-14v-4z'}),a('path',{d:'M14 12h10v4h-10v-4z'}),a('path',{d:'M14 18h6v4h-6v-4z'})),Ya=fa(Ga,{remove:(a)=>Ga.dispatch({type:'remove',args:[a]}),patch:(a,b)=>Ga.dispatch({type:'patch',args:[a,b]})},(a)=>a.displayed),Za=ca((a)=>{const b=a.dom.querySelector('td');null!==b&&b.focus()}),$a=Za(({persons:d=[],patch:b,remove:c})=>{return d.length?a('tbody',null,d.map(({value:d,index:e})=>a('tr',null,a(Na,{className:'col-lastname',person:d,index:e,patch:b}),a(Oa,{className:'col-firstname',person:d,index:e,patch:b}),a(Sa,{className:'col-birthdate',person:d,index:e,patch:b}),a(Qa,{className:'col-gender fixed-size',person:d,index:e,patch:b}),a(Ra,{className:'col-size fixed-size',person:d,index:e,patch:b}),a('td',{class:'fixed-size col-actions',"data-keyboard-selector":'button'},a('button',{tabindex:'-1',onClick:()=>c(e)},a('span',{class:'visually-hidden'},'Delete '+d.name.last+' '+d.name.first),a(Ua,null)))))):a('tbody',null,a('tr',null,a('td',{tabIndex:'-1',colSpan:'6'},'There is no data matching your request')))}),_a=Ya((b,c)=>{return a($a,{persons:b.persons,remove:c.remove,patch:c.patch})},(a)=>({persons:a}),(a,b)=>{let c=!0;return typeof a==typeof b&&(c=a.length!==b.length||a.some((c,d)=>a[d].value.id!==b[d].value.id)),c}),ab=fa(Ga,{},(a)=>({isProcessing:a.isProcessing})),bb=ab(({isProcessing:b})=>{const c=!0===b?'st-working':'',d=!0===b?'loading persons data':'data loaded';return a('div',{id:'overlay',"aria-live":'assertive',role:'alert',class:c},d)}),cb=c('tableState.sort').get,db=fa(Ga,{toggleSort:({pointer:a,direction:b})=>Ga.dispatch({type:'sort',args:[{pointer:a,direction:b}]})},cb),eb=({direction:b})=>{return'asc'===b?a(Wa,null):'desc'===b?a(Xa,null):a(Va,null)},fb=(b)=>{const{columnPointer:c,sortDirections:g=['asc','desc'],pointer:d,direction:e,sort:f}=b,h=c===d?g.indexOf(e):-1,i=(h+1)%g.length;return a('button',{tabindex:'-1',onClick:()=>f({pointer:c,direction:g[i]})},a('span',{class:'visually-hidden'},'Toggle sort'),a(eb,{direction:g[h]}))},gb=db((b,c)=>a(fb,Object.assign({},b,{sort:c.toggleSort}))),hb=c('tableState.search').get,ib=()=>!1,jb=fa(Ga,{search:(a,b)=>Ga.dispatch({type:'search',args:[{value:a,scope:b}]})},hb),kb=(b)=>a('label',null,a('span',null,b.children),a('input',{tabindex:'0',type:'search',onInput:b.onInput,placeholder:b.placeholder})),lb=jb((b,c)=>{const d=n((a)=>c.search(a.target.value,['name.last','name.first']),300);return delete b.children,a('tr',b,a('th',{"data-keyboard-selector":'input'},a(kb,{placeholder:'Case sensitive search on surname and name',onInput:d},'Search:')))},ib,ib),mb=ca((a)=>{const b=a.props['aria-hidden'];if('false'===b){const b=a.dom.querySelector('input, select');b&&setTimeout(()=>b.focus(),5)}}),nb=fa(Ga,{toggleFilterMenu:(a)=>Ga.dispatch({type:'TOGGLE_FILTER',filter:a}),commitFilter:(a)=>Ga.dispatch({type:'filter',args:[a]})},(a)=>({activeFilter:a.activeFilter,filterClauses:a.tableState.filter})),ob=mb((b={})=>{const{isHidden:c,toggleFilterMenu:d,commitFilter:e}=b,f=()=>{d(null),document.querySelector(`[aria-controls=${g}]`).focus()},g=['filter'].concat(b.scope.split('.')).join('-'),h=!0!==c;return a('tr',{id:g,class:'filter-row',onKeydown:(a)=>{('Escape'===a.code||27===a.keyCode||'Escape'===a.key)&&f()},"data-keyboard-skip":h,"aria-hidden":h+''},a('th',{colspan:'6',"data-keyboard-selector":'input, select'},a('form',{name:b.scope,onSubmit:(a)=>{const b=a.target,{name:c}=b,d=b.querySelectorAll('input, select');e({[c]:[...d].map((a)=>{return{type:a.type,value:a.value,operator:a.getAttribute('data-operator')||'includes'}})}),a.preventDefault(),f()}},b.children,a('div',{class:'visually-hidden'},a('button',{tabIndex:'-1'},'Apply')),a('p',{id:g+'-instruction'},'Press Enter to activate filter or escape to dismiss'))))}),pb=(b)=>{const{columnPointer:c,toggleFilterMenu:d,filterClauses:e={}}=b,f=e[c]||[],g=['filter'].concat(c.split('.')).join('-'),h=f.length&&f.some((a)=>a.value);return a('button',{"aria-haspopup":'true',tabindex:'-1',class:h?'active-filter':'',"aria-controls":g,onClick:()=>d(c)},a('span',{class:'visually-hidden'},'Toggle Filter menu'),a(Ta,null))},qb=nb((b,c)=>{return a(pb,Object.assign({},b,{toggleFilterMenu:c.toggleFilterMenu}))}),rb=nb((b,c)=>{return a(ob,{scope:b.scope,isHidden:b.activeFilter===b.scope,toggleFilterMenu:c.toggleFilterMenu,commitFilter:c.commitFilter},b.children)}),sb=(b)=>{const{columnPointer:c,sortDirections:f=['asc','desc'],className:d,children:e}=b;return a('th',{class:d,"data-keyboard-selector":'button'},e,a('div',{class:'buttons-container'},a(gb,{columnPointer:c,sortDirections:f}),a(qb,{columnPointer:c})))},tb=()=>{return a('thead',null,a(lb,{class:'filter-row'}),a('tr',null,a(sb,{className:'col-lastname',columnPointer:'name.last',sortDirections:['asc','desc','none']},'Surname'),a(sb,{className:'col-firstname',columnPointer:'name.first'},'Name'),a(sb,{className:'col-birthdate',sortDirections:['desc','asc'],columnPointer:'birthDate'},'Date of birth'),a(sb,{className:'col-gender fixed-size',columnPointer:'gender'},'Gender'),a(sb,{className:'col-size fixed-size',columnPointer:'size'},'Size'),a('th',{"data-keyboard-skip":!0,class:'fixed-size col-actions'})),a(rb,{scope:'name.last'},a('label',null,a('span',null,'surname includes:'),a('input',{"aria-describedby":'filter-name-last-instruction',onKeyDown:Ha(27,38,40),type:'text',placeholder:'case insensitive surname value'}))),a(rb,{scope:'name.first'},a('label',null,a('span',null,'name includes:'),a('input',{onKeyDown:Ha(27,38,40),type:'text',placeholder:'case insensitive name value'}))),a(rb,{scope:'birthDate'},a('label',null,a('span',null,'born after:'),a('input',{onKeyDown:Ha(27),"data-operator":'gt',type:'date'}))),a(rb,{scope:'gender'},a('label',null,a('span',null,'gender is:'),a('select',{onKeyDown:Ha(27),"data-operator":'is'},a('option',{value:''},'-'),a('option',{value:'female'},'female'),a('option',{value:'male'},'male')))),a(rb,{scope:'size'},a('label',null,a('span',null,'taller than:'),a('input',{onKeyDown:Ha(27),min:'150',max:'200',step:'1',type:'range',"data-operator":'gt'})),a('label',null,a('span',null,'smaller than:'),a('input',{onKeyDown:Ha(27),min:'150',max:'200',step:'1',type:'range',"data-operator":'lt'}))))},ub=fa(Ga,{slice:(a,b)=>Ga.dispatch({type:'slice',args:[{page:a,size:b}]})},(a)=>a.summary),vb=(b)=>{const{size:c,slice:d}=b;return a('div',null,a('label',null,'Page size ',a('select',{tabIndex:'-1',onChange:(a)=>d(1,+a.target.value),name:'pageSize'},a('option',{selected:20==c,value:'20'},'20 items'),a('option',{selected:30==c,value:'30'},'30 items'),a('option',{selected:50==c,value:'50'},'50 items'))))},wb=(b)=>{const{page:c,size:d,filteredCount:e,slice:f}=b;return a('div',null,a('button',{tabIndex:'-1',onClick:()=>f(c-1,d),disabled:1===c},'Previous'),a('small',null,' Page - ',c||1,' '),a('button',{tabIndex:'-1',onClick:()=>f(c+1,d),disabled:0>=e-c*d},'Next'))},xb=ub((b)=>{const{page:c,size:d,filteredCount:e}=b;return a('div',null,' showing items ',a('strong',null,(c-1)*d+(0<e?1:0)),' - ',a('strong',null,x(e,c*d)),' of ',a('strong',null,e),' matching items')}),yb=ub((b,c)=>a(wb,Object.assign({},b,{slice:c.slice}))),zb=ub((b,c)=>a(vb,Object.assign({},b,{slice:c.slice}))),Ab=()=>a('tfoot',null,a('tr',null,a('td',{colspan:'3'},a(xb,null)),a('td',{colspan:'2',"data-keyboard-selector":'button:not(:disabled)',colSpan:'3'},a(yb,null)),a('td',{"data-keyboard-selector":'select'},a(zb,null)))),Bb=(a,b)=>!0===a.matches(b)?a:Bb(a.parentElement,b),Cb='data-keyboard-selector',Db='data-keyboard-skip',Eb=(a)=>()=>a,Fb=aa((a)=>{Ga.dispatch({type:'exec',args:[]}),w(a.dom.querySelector('table'))}),Gb=Fb(()=>a('div',{id:'table-container'},a(bb,null),a('table',null,a(tb,null),a(_a,null),a(Ab,null))));setTimeout(()=>Z(Gb,{},document.getElementById('demo-container')),10)})();
